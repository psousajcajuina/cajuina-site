---
import Layout from '@/layouts/Layout.astro';

const metadata = {
  title: 'Ferramenta YouTube ‚Üí Shortcode',
  robots: {
    index: false,
    follow: false,
  },
};
---

<Layout metadata={metadata}>
  <div
    class="flex min-h-screen items-center justify-center bg-[linear-gradient(135deg,#667eea_0%,#764ba2_100%)] p-5 font-[-apple-system,BlinkMacSystemFont,'Segoe_UI',Roboto,'Helvetica_Neue',Arial,sans-serif] text-[#333]"
  >
    <div
      class="w-full max-w-[700px] rounded-2xl bg-white p-10 shadow-[0_20px_60px_rgba(0,0,0,0.3)] max-[600px]:p-5"
    >
      <h1 class="mb-2.5 text-[28px] text-[#667eea] max-[600px]:text-2xl">
        üé¨ Ferramenta YouTube ‚Üí Shortcode
      </h1>
      <p class="mb-[30px] text-base text-[#666]">
        Converta URLs do YouTube em shortcodes automaticamente para usar no CMS
      </p>

      <div
        class="my-[30px] rounded-xl border-2 border-dashed border-[#667eea] bg-[#f8f9fa] p-[30px] text-center"
      >
        <a
          href="javascript:(function(){const url=prompt('Cole a URL do YouTube:');if(!url)return;const id=url.match(/(?:v=|youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})/)?.[1];if(!id){alert('‚ùå URL inv√°lida do YouTube');return;}const code='[[youtube:'+id+']]';navigator.clipboard.writeText(code).then(()=>{alert('‚úÖ Copiado para √°rea de transfer√™ncia!\n\n'+code+'\n\nCole no editor com Ctrl+V');}).catch(()=>{prompt('Copie o c√≥digo abaixo:',code);});})();"
          class="inline-block cursor-move rounded-lg bg-[linear-gradient(135deg,#667eea_0%,#764ba2_100%)] px-8 py-4 text-lg font-bold text-white shadow-[0_4px_12px_rgba(102,126,234,0.4)] transition-all duration-200 hover:-translate-y-0.5 hover:shadow-[0_6px_20px_rgba(102,126,234,0.6)] max-[600px]:px-6 max-[600px]:py-3 max-[600px]:text-base"
          onclick="alert('‚ö†Ô∏è N√£o clique! Arraste este bot√£o para a barra de favoritos do seu navegador.'); return false;"
        >
          üìå YouTube ‚Üí Shortcode
        </a>
        <p class="mt-[15px] text-sm text-[#666]">
          <strong class="text-[#667eea]">üëÜ Arraste este bot√£o</strong> para a barra
          de favoritos do seu navegador
        </p>
      </div>

      <div
        class="my-5 rounded-md border border-[#c3e6cb] bg-[#d4edda] p-[15px] text-[#155724]"
      >
        <strong>üí° Como funciona:</strong> Depois de instalar, clique no favorito
        sempre que quiser adicionar um v√≠deo. Cole a URL do YouTube e o shortcode
        ser√° copiado automaticamente!
      </div>

      <div class="my-[30px]">
        <h2 class="mb-5 text-[#667eea]">üìã Passo a Passo para Instalar</h2>

        <div class="mb-5 flex items-start rounded-lg bg-[#f8f9fa] p-[15px]">
          <div
            class="mr-[15px] flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-[#667eea] font-bold text-white"
          >
            1
          </div>
          <div>
            <h3 class="mb-[5px] text-base text-[#333]">
              Mostre a barra de favoritos
            </h3>
            <p class="text-sm leading-normal text-[#666]">
              No navegador, pressione <strong>Ctrl+Shift+B</strong> (Windows) ou
              <strong>Cmd+Shift+B</strong> (Mac) para exibir a barra de favoritos.
            </p>
          </div>
        </div>

        <div class="mb-5 flex items-start rounded-lg bg-[#f8f9fa] p-[15px]">
          <div
            class="mr-[15px] flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-[#667eea] font-bold text-white"
          >
            2
          </div>
          <div>
            <h3 class="mb-[5px] text-base text-[#333]">Arraste o bot√£o roxo</h3>
            <p class="text-sm leading-normal text-[#666]">
              Clique e arraste o bot√£o "YouTube ‚Üí Shortcode" acima para a barra
              de favoritos do seu navegador.
            </p>
          </div>
        </div>

        <div class="mb-5 flex items-start rounded-lg bg-[#f8f9fa] p-[15px]">
          <div
            class="mr-[15px] flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-[#667eea] font-bold text-white"
          >
            3
          </div>
          <div>
            <h3 class="mb-[5px] text-base text-[#333]">Pronto! Agora use</h3>
            <p class="text-sm leading-normal text-[#666]">
              Sempre que precisar converter uma URL do YouTube, clique no
              favorito que voc√™ acabou de criar.
            </p>
          </div>
        </div>
      </div>

      <div
        class="my-5 rounded border-l-4 border-[#2196f3] bg-[#e3f2fd] p-[15px]"
      >
        <div class="mb-2.5 font-bold text-[#1976d2]">
          üìù Exemplo de Uso no CMS
        </div>
        <p class="text-sm">
          <strong>1.</strong> Abra o YouTube e copie a URL:
          <code class="text-sm"
            >https://www.youtube.com/watch?v=dQw4w9WgXcQ</code
          >
        </p>
        <p class="text-sm">
          <strong>2.</strong> No editor do CMS, clique no bookmarklet nos favoritos
        </p>
        <p class="text-sm"><strong>3.</strong> Cole a URL quando solicitado</p>
        <p class="text-sm">
          <strong>4.</strong> O shortcode
          <code class="text-sm">[[youtube:dQw4w9WgXcQ]]</code> √© copiado automaticamente
        </p>
        <p class="text-sm">
          <strong>5.</strong> Cole no editor markdown com
          <strong>Ctrl+V</strong>
        </p>
      </div>

      <div
        class="my-[30px] rounded-lg border-2 border-[#ffc107] bg-[#fff3cd] p-5"
      >
        <h3 class="mb-[15px] text-[#856404]">üß™ Testar Convers√£o</h3>
        <p class="mb-[15px] text-sm text-[#856404]">
          Teste a convers√£o de URL para shortcode aqui:
        </p>
        <input
          type="text"
          id="testUrl"
          class="mb-2.5 w-full rounded-md border-2 border-[#ddd] p-3 text-sm"
          placeholder="Cole uma URL do YouTube (ex: https://www.youtube.com/watch?v=dQw4w9WgXcQ)"
        />
        <button
          class="cursor-pointer rounded-md border-none bg-[#ffc107] px-6 py-3 font-bold text-[#333] transition-colors duration-200 hover:bg-[#ffb300]"
          onclick="convertUrl()"
        >
          Converter para Shortcode
        </button>
        <div
          id="result"
          class="mt-[15px] hidden rounded-md bg-white p-[15px] font-[monospace]"
        >
        </div>
      </div>

      <div class="mt-[30px] border-t-2 border-[#eee] pt-[30px]">
        <h3 class="mb-[15px] text-[#667eea]">üìö Formatos de URL Suportados</h3>
        <div
          class="my-[15px] overflow-x-auto rounded-lg bg-[#2d2d2d] p-[15px] font-['Courier_New',monospace] text-sm text-[#f8f8f2]"
        >
          ‚úÖ https://www.youtube.com/watch?v=dQw4w9WgXcQ<br />
          ‚úÖ https://youtu.be/dQw4w9WgXcQ<br />
          ‚úÖ https://www.youtube.com/embed/dQw4w9WgXcQ<br />
          ‚úÖ https://m.youtube.com/watch?v=dQw4w9WgXcQ
        </div>
      </div>

      <div class="mt-[30px] text-center text-[#999]">
        <p>
          Precisa de ajuda? Consulte o
          <a href="/admin/guia-do-editor" class="text-[#667eea]! underline"
            >Guia do Editor</a
          >
        </p>
      </div>
    </div>
  </div>

  <script>
    function convertUrl() {
      const input = document.getElementById(
        'testUrl'
      ) as HTMLInputElement | null;
      const result = document.getElementById('result');

      if (!input || !result) return;

      const url = input.value.trim();

      if (!url) {
        result.className =
          'mt-[15px] p-[15px] bg-white rounded-md font-[monospace] block text-[#dc3545]';
        result.textContent = '‚ùå Por favor, cole uma URL do YouTube';
        return;
      }

      const id = url.match(
        /(?:v=|youtu\.be\/|embed\/)([a-zA-Z0-9_-]{11})/
      )?.[1];

      if (!id) {
        result.className =
          'mt-[15px] p-[15px] bg-white rounded-md font-[monospace] block text-[#dc3545]';
        result.textContent =
          '‚ùå URL inv√°lida. Certifique-se de que √© uma URL v√°lida do YouTube.';
        return;
      }

      const shortcode = `[[youtube:${id}]]`;
      result.className =
        'mt-[15px] p-[15px] bg-white rounded-md font-[monospace] block text-[#28a745]';
      result.innerHTML = `
        <strong>‚úÖ Convers√£o bem-sucedida!</strong><br><br>
        <strong>Shortcode:</strong><br>
        <code style="background: #f0f0f0; padding: 10px; display: block; margin-top: 10px; border-radius: 4px;">${shortcode}</code>
        <br>
        <button 
          onclick="navigator.clipboard.writeText('${shortcode}').then(() => alert('‚úÖ Copiado!'))" 
          style="margin-top: 10px; padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer;"
        >
          üìã Copiar Shortcode
        </button>
      `;
    }

    // Permite pressionar Enter para converter
    const testUrlInput = document.getElementById('testUrl');
    if (testUrlInput) {
      testUrlInput.addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
          convertUrl();
        }
      });
    }
  </script>
</Layout>
